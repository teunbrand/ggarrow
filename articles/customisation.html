<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Customising arrows • ggarrow</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Customising arrows">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggarrow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/ggarrow.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/customisation.html">Customising arrows</a></li>
    <li><a class="dropdown-item" href="../articles/ornaments.html">Arrow Ornaments</a></li>
    <li><a class="dropdown-item" href="../articles/params.html">Arrow parameters</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/teunbrand/ggarrow/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Customising arrows</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/teunbrand/ggarrow/blob/main/vignettes/customisation.Rmd" class="external-link"><code>vignettes/customisation.Rmd</code></a></small>
      <div class="d-none name"><code>customisation.Rmd</code></div>
    </div>

    
    
<p>There are a few ways in which one can tweak the display of arrow
ornaments in ggarrow. This vignette goes through a few methods for
making new arrow ornaments, from basic xy-coordinates to function
factories and using the ornaments in scales.</p>
<div class="section level3">
<h3 id="new-ornaments">New ornaments<a class="anchor" aria-label="anchor" href="#new-ornaments"></a>
</h3>
<p>In principle, extending ornaments is as straightforward as being able
to construct a polygon in an xy-coordinate matrix with <code>x</code> as
the first column and <code>y</code> as the second column.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_ornament</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span>, length.out <span class="op">=</span> <span class="va">n</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.4</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="op">*</span> <span class="va">l</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="op">*</span> <span class="va">l</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We can inspect the coordinates of our new ornament. It is ggarrow’s
convention that the line joins the ornament at the (0,0) coordinate.
Also, the tip of the ornament is expected to be at the (1,0)
coordinate.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">orn</span> <span class="op">&lt;-</span> <span class="fu">my_ornament</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot_ornament</span><span class="op">(</span><span class="va">orn</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>You can now use your ornament as the <code>arrow_head</code>,
<code>arrow_fins</code> and <code>arrow_mid</code> arguments. It just
listens to the usual arguments like <code>length_{head/fins/mid}</code>,
<code>resect_{head/fins}</code> and <code>mid_place</code> and scales
with the line width (if the length is not an absolute unit).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://teunbrand.github.io/ggarrow/">ggarrow</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>, arrow_head <span class="op">=</span> <span class="va">orn</span>, resect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, arrow_fins <span class="op">=</span> <span class="va">orn</span>, length_fins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, arrow_mid  <span class="op">=</span> <span class="va">orn</span>, mid_place <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.33</span>, <span class="fl">0.66</span><span class="op">)</span>, </span>
<span>             linewidth <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="ornament-factories">Ornament factories<a class="anchor" aria-label="anchor" href="#ornament-factories"></a>
</h3>
<p>Sometimes, you might want to know more about the context in which
you’re drawing the ornament than can’t be known before plotting. For
example, let’s say we wanted to add half the star we made above an
arrowhead. When doing this it is immediately clear that the connection
with the line looks awful.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">half_star</span> <span class="op">&lt;-</span> <span class="va">orn</span><span class="op">[</span><span class="va">orn</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="va">half_star</span>, linewidth <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>If we know the linewidth in advance, you might nudge it manually.
Because the default <code>length_head</code> is 4 and the we set the
linewidth is 3, the arrowhead will get a size of 3 * 4 = 12 mm.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">magic_number</span> <span class="op">&lt;-</span> <span class="fl">0.7528125</span></span>
<span><span class="va">half_star</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">half_star</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">-</span> <span class="op">(</span><span class="fl">1.5</span><span class="op">/</span><span class="fl">12</span><span class="op">)</span> <span class="op">*</span> <span class="va">magic_number</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="va">half_star</span>, linewidth <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>The way to solve this, is to use a function factory. This method is
much more involved, so be forewarned. First, if we just write a function
that does as we did before, you might notice a <em>tiny</em> star at the
end of the line as a few pixels.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">half_star</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ornament</span> <span class="op">&lt;-</span> <span class="fu">my_ornament</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">half</span> <span class="op">&lt;-</span> <span class="va">ornament</span><span class="op">[</span><span class="va">ornament</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span>    <span class="va">half</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="fu">half_star</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>That is because the output of the function factory gets interpreted
as millimetres. To be responsive to what <code>length_head</code> is
being passed around, you should multiply your output with the length.
<code>length</code> is one of the parameters that the function produced
by the factory can receive. Doing this gives more reasonable output, but
we can now see that the half-star extends beyond the path’s end.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">half_star</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ornament</span> <span class="op">&lt;-</span> <span class="fu">my_ornament</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">length</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">half</span> <span class="op">&lt;-</span> <span class="va">ornament</span><span class="op">[</span><span class="va">ornament</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span>    <span class="va">half</span> <span class="op">*</span> <span class="va">length</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="fu">half_star</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>To control how much the line should be cut back, you can set the
‘resect’ attribute on your output. For this shape, we should probably
resect the line by exactly the length parameter we get. Now the
alignment looks as it should.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">half_star</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ornament</span> <span class="op">&lt;-</span> <span class="fu">my_ornament</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">length</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">half</span> <span class="op">&lt;-</span> <span class="va">ornament</span><span class="op">[</span><span class="va">ornament</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span>    <span class="va">half</span> <span class="op">&lt;-</span> <span class="va">half</span> <span class="op">*</span> <span class="va">length</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">half</span>, <span class="st">"resect"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">length</span></span>
<span>    <span class="va">half</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="fu">half_star</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Lastly, to fix the actual problem we were trying to solve, we can
nudge the y-coordinates by half the linewidth. <code>width</code> is a
parameter the produced function can receive that represents the line
width. Now, it looks like it should.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">half_star</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ornament</span> <span class="op">&lt;-</span> <span class="fu">my_ornament</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">length</span>, <span class="va">width</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">half</span> <span class="op">&lt;-</span> <span class="va">ornament</span><span class="op">[</span><span class="va">ornament</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span>    <span class="va">half</span> <span class="op">&lt;-</span> <span class="va">half</span> <span class="op">*</span> <span class="va">length</span></span>
<span>    <span class="va">half</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">half</span><span class="op">[</span>, <span class="st">"y"</span><span class="op">]</span> <span class="op">-</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="va">width</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">half</span>, <span class="st">"resect"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">length</span></span>
<span>    <span class="va">half</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">width</span>, linewidth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">width</span><span class="op">)</span>, group <span class="op">=</span> <span class="va">width</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="fu">half_star</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>Besides <code>width</code> and <code>length</code>, the inner
function can also receive <code>resect</code>. Because functionality
might be expanded in the future, the last argument to the inner function
should be <code>...</code>.</p>
</div>
<div class="section level3">
<h3 id="scales">Scales<a class="anchor" aria-label="anchor" href="#scales"></a>
</h3>
<p>The discrete scales in ggarrow can take a mixed list of things that
may define an arrow. That way, you can just put your own ornaments in a
list to have it become part of the scale.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/whirlpool.html">whirlpool</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_equal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, resect <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/discrete_arrow_scales.html">scale_arrow_head_discrete</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"head_wings"</span>, <span class="va">orn</span>, <span class="st">"fins_feather"</span>, <span class="va">orn</span>, <span class="st">"cup"</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>If you start your function name with the <code>arrow_</code>-prefix,
the ornament can be automatically found if available in the global
environment.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arrow_star</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">my_ornament</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, resect <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/discrete_arrow_scales.html">scale_arrow_head_discrete</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"head_wings"</span>, <span class="st">"star"</span>, <span class="st">"fins_feather"</span>, <span class="st">"star"</span>, <span class="st">"cup"</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>While not always very easy to figure out, as different arrowheads are
discrete, one <em>can</em> in theory also apply a continuous scale to
arrows. Please note that I sneaked in a <code><a href="https://rdrr.io/r/base/Round.html" class="external-link">round()</a></code> in the
function above, this is so that we can demonstrate a continuous scale
with the star.</p>
<p>If we have something about our arrowhead that may vary in number,
like an angle, or some size or in this example, the number of points on
a star (though not <em>truly</em> continuous), we can use
<code><a href="../reference/continuous_arrow_scales.html">scale_arrow_head_continuous()</a></code> to map our variable to the
arrowhead. We should give the function we created as the
<code>generator</code> argument. The variable part of our function
argument should be provided as <code>map_arg</code>, and the range of
values it can take on should be provided as <code>range</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_arrow.html">geom_arrow</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>arrow_head <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span><span class="op">)</span>, resect <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/continuous_arrow_scales.html">scale_arrow_head_continuous</a></span><span class="op">(</span></span>
<span>    generator <span class="op">=</span> <span class="va">arrow_star</span>, map_arg <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>    range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="customisation_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Teun van den Brand.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
